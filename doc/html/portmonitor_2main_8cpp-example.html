---
layout: doc
title: PropellerManager - portmonitor/main.cpp
doctitle: PropellerManager
doctagline: An event-driven C++ API for Propeller devices
docurl: /projects/propellermanager/
---
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
    <div class="content" id="content">
                    <div style="margin-bottom: 15px;">
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">portmonitor/main.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>Here is an example of how to enable the port monitor in an application.</p>
<p>First, we implement a class to listen to the port monitor.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;QDebug&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;QObject&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="propellermanager_8h.html">propellermanager.h</a>&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>PortMonitor</div>
<div class="line">    : <span class="keyword">public</span> QObject</div>
<div class="line">{</div>
<div class="line">    Q_OBJECT</div>
<div class="line"></div>
<div class="line">    <a name="_a0"></a><a class="code" href="class_propeller_manager.html">PropellerManager</a> manager;</div>
<div class="line">    QStringList ports;</div>
<div class="line"></div>
<div class="line"><span class="keyword">private</span> slots:</div>
<div class="line">    <span class="keywordtype">void</span> updatePorts()</div>
<div class="line">    {</div>
<div class="line">        ports = manager.<a name="a1"></a><a class="code" href="class_propeller_manager.html#a5224b7c35e4dfcb8968735f3baa8599e">listPorts</a>();</div>
<div class="line">        qDebug() &lt;&lt; <span class="stringliteral">&quot;Ports:&quot;</span> &lt;&lt; ports;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    PortMonitor()</div>
<div class="line">        : QObject()</div>
<div class="line">    {</div>
<div class="line">        manager.enablePortMonitor(<span class="keyword">true</span>);</div>
<div class="line">        updatePorts();</div>
<div class="line"></div>
<div class="line">        connect(&amp;manager, SIGNAL(portListChanged()), <span class="keyword">this</span>, SLOT(updatePorts()));</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    ~PortMonitor()</div>
<div class="line">    {</div>
<div class="line">        disconnect(&amp;manager, SIGNAL(portListChanged()), <span class="keyword">this</span>, SLOT(updatePorts()));</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">};</div>
<div class="line"></div>
</div><!-- fragment --><p>Then initialize the class and run.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;portmonitor.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;QCoreApplication&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">    QCoreApplication app(argc, argv);</div>
<div class="line"></div>
<div class="line">    PortMonitor pm;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> app.exec();</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
</div>
</div>
